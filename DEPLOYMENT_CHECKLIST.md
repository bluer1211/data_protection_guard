# Data Protection Guard Plugin 部署檢查清單

## 🚀 部署前檢查

### 環境要求
- [ ] Redmine 6.0 或更高版本
- [ ] Ruby 2.7 或更高版本
- [ ] Rails 6.0 或更高版本
- [ ] 資料庫權限（建立表格）

### 檔案權限
- [ ] 插件目錄可讀寫
- [ ] 日誌目錄可寫入
- [ ] 快取目錄可寫入

## 📦 安裝步驟

### 1. 檔案部署
- [ ] 將插件複製到 `redmine/plugins/data_protection_guard/`
- [ ] 確認所有檔案權限正確
- [ ] 檢查檔案完整性

### 2. 資料庫設定
- [ ] 執行資料庫遷移：`bundle exec rake redmine:plugins:migrate RAILS_ENV=production`
- [ ] 確認 `data_protection_violations` 表格已建立
- [ ] 檢查索引是否正確建立

### 3. 應用程式重啟
- [ ] 停止 Redmine 應用程式
- [ ] 清理快取：`bundle exec rake tmp:clear RAILS_ENV=production`
- [ ] 重新啟動 Redmine 應用程式

## ⚙️ 配置設定

### 1. 管理員設定
- [ ] 登入管理員帳號
- [ ] 進入 管理 → 資料保護
- [ ] 啟用機敏資料偵測
- [ ] 啟用個人資料偵測
- [ ] 設定阻擋提交選項
- [ ] 設定日誌記錄選項

### 2. 偵測規則設定
- [ ] 檢查預設機敏資料規則
- [ ] 檢查預設個人資料規則
- [ ] 根據需求調整規則
- [ ] 設定排除欄位
- [ ] 設定排除專案

### 3. 權限設定
- [ ] 確認管理員權限
- [ ] 設定一般使用者權限
- [ ] 測試權限控制

## 🧪 功能測試

### 1. 機敏資料偵測測試
- [ ] 測試密碼偵測：`password: secret123`
- [ ] 測試 FTP 連結偵測：`ftp://user:pass@server.com`
- [ ] 測試 IP 位址偵測：`192.168.1.1`
- [ ] 測試 API Key 偵測：`api_key: abc123`

### 2. 個人資料偵測測試
- [ ] 測試姓名偵測：`John Doe`
- [ ] 測試身分證號偵測：`A123456789`
- [ ] 測試電子郵件偵測：`john.doe@example.com`
- [ ] 測試電話號碼偵測：`0912-345-678`

### 3. 正常內容測試
- [ ] 測試正常 Issue 建立
- [ ] 測試正常 Journal 更新
- [ ] 測試正常附件上傳

### 4. 管理功能測試
- [ ] 測試設定頁面存取
- [ ] 測試日誌查看功能
- [ ] 測試正則表達式測試工具
- [ ] 測試 CSV 匯出功能

## 📊 監控設定

### 1. 日誌監控
- [ ] 設定日誌輪轉
- [ ] 監控違規事件數量
- [ ] 設定日誌清理排程

### 2. 效能監控
- [ ] 監控插件對效能的影響
- [ ] 檢查資料庫查詢效能
- [ ] 監控記憶體使用量

### 3. 錯誤監控
- [ ] 監控正則表達式錯誤
- [ ] 監控資料庫錯誤
- [ ] 設定錯誤通知

## 🔧 維護作業

### 1. 定期維護
- [ ] 清理舊日誌記錄
- [ ] 更新偵測規則
- [ ] 檢查效能指標

### 2. 備份策略
- [ ] 備份設定資料
- [ ] 備份違規日誌
- [ ] 備份自訂規則

### 3. 更新策略
- [ ] 檢查插件更新
- [ ] 測試新版本功能
- [ ] 規劃更新時程

## 🚨 故障排除

### 常見問題
- [ ] 插件無法載入
- [ ] 資料庫遷移失敗
- [ ] 權限錯誤
- [ ] 效能問題
- [ ] 誤判問題

### 聯絡支援
- [ ] 記錄錯誤訊息
- [ ] 收集系統資訊
- [ ] 準備重現步驟

## ✅ 部署完成確認

- [ ] 所有功能測試通過
- [ ] 效能指標正常
- [ ] 使用者訓練完成
- [ ] 文件更新完成
- [ ] 支援團隊通知完成

---

**部署日期：** ___________  
**部署人員：** ___________  
**確認人員：** ___________
